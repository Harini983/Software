package runner;

import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;

import org.apache.commons.io.FileUtils;
import org.openqa.selenium.By;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.testng.Assert;
import org.testng.annotations.AfterClass;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import com.aventstack.extentreports.ExtentReports;
import com.aventstack.extentreports.reporter.ExtentSparkReporter;

import utils.Base;
import utils.LoggerHandler;

public class TestRunner extends Base{

    WebDriver driver;
    ExtentReports reports;
    @BeforeClass
    public void generateReport(){
        reports = new ExtentReports();
        ExtentSparkReporter spark = new ExtentSparkReporter("reports/myReport.html");
        spark.config().setDocumentTitle("Report");
        reports.attachReporter(spark);
    }
    @BeforeMethod
    public void launchBrowser() throws MalformedURLException{
        // launch your browser
        driver = openBrowser();
        driver.get(prop.getProperty("url"));
    }

    @Test
    public void testOne() throws InterruptedException, IOException {
        // write or call ur pages here
        driver.findElement(By.xpath("//button[@id ='moe-dontallow_button']")).click();
        Thread.sleep(5000);
        driver.findElement(By.xpath("//a[text() = 'Contact Us']")).click();
        Thread.sleep(5000);
        WebElement ele = driver.findElement(By.xpath("//h2[contains(text() ,'Contact')]"));
        Assert.assertTrue(ele.getText().contains("Contact"));
        Thread.sleep(5000);
        driver.findElement(By.xpath("//div[@class = 'container']//a")).click();
        TakesScreenshot screenshot = (TakesScreenshot)driver;
        File source = screenshot.getScreenshotAs(OutputType.FILE);
        FileUtils.copyFile(source,new File("screenshot/ss.jpg"));
        LoggerHandler.logInfo("Testcase passed");
    }

    @AfterMethod
    public void tearDown() {
        // quit the driver here
        driver.quit();
    }

    @AfterClass
    public void flushreport(){
        reports.flush();
    }
}

https://www.notion.so/Lab-https-www-tatacliq-com-271395b780c58012ad01ef1347c5ed41?source=copy_link
